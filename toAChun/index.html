<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>æˆ‘ä»¬åœ¨ä¸€èµ·çš„æ—¥å­</title>
   <script>
    const password = "lzc020524"; // è‡ªå®šä¹‰å¯†ç 
    const input = prompt("è¯·è¾“å…¥è®¿é—®å¯†ç ï¼š");
    if (input !== password) {
      alert("å¯†ç é”™è¯¯ï¼");
      document.documentElement.innerHTML = "<h2 style='text-align:center;margin-top:50px;'>æœªç»æˆæƒï¼Œæ— æ³•è®¿é—®ã€‚</h2>";
      throw new Error("è®¿é—®å—é™");
    }
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/lightbox2@2/dist/css/lightbox.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'ZCOOL KuaiLe', cursive;
      overflow-x: hidden;
      color: #444;
      background: url('images/bg4.jpg') top center no-repeat;
      background-size: cover; /* èƒŒæ™¯å›¾é“ºæ»¡æ•´ä¸ªè§†å£ */
      background-attachment: fixed; /* èƒŒæ™¯å›ºå®šï¼Œæ»šåŠ¨æ—¶ä¸åŠ¨ */
      background-repeat: no-repeat;
    }
    .content {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.85);
      padding: 40px 20px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      margin-top: 60px;
    }
    h1, h2, p {
      text-align: center;
    }
    #time-elapsed {
      font-size: 32px;
      color: #d2449a;
      margin-top: 15px;
      text-align: center;
    }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .gallery a {
      overflow: hidden;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      background-color: white;
      display: block;
    }
    .gallery img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
        #photo-upload {
      display: none;
    }
    footer {
      text-align: center;
      font-size: 18px;
      background: #fbe8ff;
      padding: 20px;
      margin-top: 40px;
    }
    #story-form {
      margin-top: 20px;
      text-align: center;
    }
    #story-text {
      width: 90%;
      max-width: 600px;
      height: 80px;
      padding: 10px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ccc;
      resize: none;
    }
    .photo-upload-btn,
#submit-story {
  display: block;
  margin: 20px auto 0;
  padding: 10px 20px;
  font-size: 18px;
  font-family: 'ZCOOL KuaiLe', cursive; /* å…³é”®ï¼šæŒ‡å®šç»Ÿä¸€å­—ä½“ */
  font-weight: normal;
  border: none;
  background-color: #ffd3f6;
  border-radius: 8px;
  cursor: pointer;
  width: max-content;
  color: #d2449a; /* æ›´æ¸…æ™°çš„æŒ‰é’®å­—ä½“é¢œè‰² */
}

    .timeline {
      margin-top: 20px;
      padding: 0 10px;
      max-height: 300px;
      overflow-y: auto;
    }
    .timeline-item {
      background: #fff;
      border-left: 4px solid #d2449a;
      padding: 10px 15px;
      margin: 10px 0;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }
    .timeline-item span {
      display: block;
      font-size: 14px;
      color: #999;
      margin-bottom: 6px;
    }
    .delete-photo-btn {
      display: block;
      margin: 6px auto 0;
      font-size: 12px;
      color: #d2449a;
      border: none;
      background: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <div class="content" data-aos="fade-down">
    <h1>Toäº²çˆ±çš„é˜¿çº¯ï¼Œæˆ‘ä»¬åœ¨ä¸€èµ·çš„ ğŸ’œ</h1>
    <div id="time-elapsed">è®¡ç®—ä¸­...</div>
    <p>ä» 2025å¹´3æœˆ9æ—¥èµ·çš„æ¯ä¸€ç§’ï¼Œæˆ‘éƒ½çæƒœ</p>

    <h2>æˆ‘ä»¬ä¸€èµ·çš„å›å¿†</h2>
    <div class="gallery" id="photo-gallery">
      <!-- é¢„ç½®ç…§ç‰‡ -->
      <a href="images/photo1.jpg" data-lightbox="love" data-title="æˆ‘ä»¬çš„å›å¿†"><img src="images/photo1.jpg" /></a>
      <a href="images/photo2.jpg" data-lightbox="love" data-title="æˆ‘ä»¬çš„å›å¿†"><img src="images/photo2.jpg" /></a>
      <a href="images/photo3.jpg" data-lightbox="love" data-title="æˆ‘ä»¬çš„å›å¿†"><img src="images/photo3.jpg" /></a>
    </div>
    <label for="photo-upload" class="photo-upload-btn">ä¸Šä¼ ç…§ç‰‡</label>
    <input type="file" id="photo-upload" accept="image/*" multiple />

    <h2>æˆ‘ä»¬çš„æ•…äº‹</h2>
    <p>æˆ‘ä»¬ä¸€èµ·ç»å†äº†è®¸å¤šç¾å¥½æ—¶åˆ»ï¼Œä»ç¬¬ä¸€æ¬¡è§é¢åˆ°æ¯ä¸€æ¬¡çº¦ä¼šï¼Œæ¯ä¸€æ¬¡æ‹¥æŠ±ï¼Œæ¯ä¸€å¥â€œæˆ‘çˆ±ä½ â€...</p>

    <div id="story-form">
      <textarea id="story-text" placeholder="å†™ä¸‹æˆ‘ä»¬çš„æ•…äº‹ï¼Œä¾‹å¦‚ï¼š2024å¹´5æœˆ19æ—¥ ä¸€èµ·å»å…¬å›­æ”¾é£ç­..."></textarea><br />
      <button id="submit-story">æ·»åŠ æ•…äº‹</button>
    </div>
    <div class="timeline" id="story-timeline"></div>
  </div>

  <footer data-aos="fade-up">
    â¤ï¸ çŒ®ç»™æˆ‘æœ€çˆ±çš„ä½ ï¼Œæ¯ä¸€å¤©éƒ½å€¼å¾—çºªå¿µ
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/lightbox2@2/dist/js/lightbox.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>
    AOS.init({ duration: 1000, once: true });

    function updateTime() {
      const startDate = new Date("2025-03-09T00:00:00");
      const now = new Date();
      const diffMs = now - startDate;
      const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diffMs % (1000 * 60)) / 1000);
      document.getElementById("time-elapsed").innerText =
        `ç¬¬ ${days} å¤© ${hours} å°æ—¶ ${minutes} åˆ†é’Ÿ ${seconds} ç§’`;
    }

    setInterval(updateTime, 1000);
    updateTime();

    function loadUserPhotos() {
      const gallery = document.getElementById("photo-gallery");
      const userPhotos = JSON.parse(localStorage.getItem("userPhotos") || "[]");

      userPhotos.forEach((base64, idx) => {
        const wrapper = document.createElement("div");

        const a = document.createElement("a");
        a.href = base64;
        a.setAttribute("data-lightbox", "love");
        a.setAttribute("data-title", "æˆ‘ä»¬çš„å›å¿†");

        const img = document.createElement("img");
        img.src = base64;

        a.appendChild(img);
        wrapper.appendChild(a);

        const del = document.createElement("button");
        del.textContent = "åˆ é™¤";
        del.className = "delete-photo-btn";
        del.onclick = () => {
          if (confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ ç…§ç‰‡å—ï¼Ÿ")) {
            userPhotos.splice(idx, 1);
            localStorage.setItem("userPhotos", JSON.stringify(userPhotos));
            location.reload();
          }
        };
        wrapper.appendChild(del);

        gallery.appendChild(wrapper);
      });
    }

    document.getElementById("photo-upload").addEventListener("change", function (e) {
      const files = Array.from(e.target.files);
      let index = 0;
      const userPhotos = JSON.parse(localStorage.getItem("userPhotos") || "[]");

      function readNext() {
        if (index >= files.length) {
          localStorage.setItem("userPhotos", JSON.stringify(userPhotos));
          loadUserPhotos();
          return;
        }

        const file = files[index++];
        if (!file.type.startsWith("image/")) return readNext();

        const reader = new FileReader();
        reader.onload = function (evt) {
          userPhotos.push(evt.target.result);
          readNext();
        };
        reader.readAsDataURL(file);
      }

      readNext();
    });

    function loadStories() {
      const timeline = document.getElementById("story-timeline");
      timeline.innerHTML = "";
      const stories = JSON.parse(localStorage.getItem("ourStories") || "[]");

      stories.forEach((story, index) => {
        const div = document.createElement("div");
        div.className = "timeline-item";

        const timeSpan = document.createElement("span");
        timeSpan.textContent = story.time;

        const textNode = document.createElement("div");
        textNode.textContent = story.text;

        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "âŒ";
        deleteBtn.style.float = "right";
        deleteBtn.style.background = "transparent";
        deleteBtn.style.border = "none";
        deleteBtn.style.cursor = "pointer";
        deleteBtn.style.color = "#d2449a";
        deleteBtn.title = "åˆ é™¤è¿™æ¡æ•…äº‹";
        deleteBtn.onclick = function () {
          if (confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æ•…äº‹å—ï¼Ÿ")) {
            stories.splice(index, 1);
            localStorage.setItem("ourStories", JSON.stringify(stories));
            loadStories();
          }
        };

        div.appendChild(deleteBtn);
        div.appendChild(timeSpan);
        div.appendChild(textNode);
        timeline.appendChild(div);
      });
    }

    document.getElementById("submit-story").addEventListener("click", function () {
      const text = document.getElementById("story-text").value.trim();
      if (!text) return alert("è¯·è¾“å…¥æ•…äº‹å†…å®¹ï¼");
      const now = new Date();
      const timestamp =
        now.getFullYear() +
        "å¹´" +
        (now.getMonth() + 1) +
        "æœˆ" +
        now.getDate() +
        "æ—¥ " +
        now.getHours().toString().padStart(2, "0") +
        ":" +
        now.getMinutes().toString().padStart(2, "0");
      const newStory = { time: timestamp, text: text };
      const stories = JSON.parse(localStorage.getItem("ourStories") || "[]");
      stories.unshift(newStory);
      localStorage.setItem("ourStories", JSON.stringify(stories));
      document.getElementById("story-text").value = "";
      loadStories();
    });

    window.addEventListener("DOMContentLoaded", () => {
      loadUserPhotos();
      loadStories();
    });
  </script>
</body>
</html>
